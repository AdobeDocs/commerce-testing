"use strict";(self.webpackChunkcommerce_testing=self.webpackChunkcommerce_testing||[]).push([[3017],{91746:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return c}});var o,a=t(87462),i=t(63366),r=(t(15007),t(64983)),s=t(91515),m=["components"],p={},d=(o="InlineAlert",function(e){return console.warn("Component "+o+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)}),l={_frontmatter:p},g=s.Z;function c(e){var n=e.components,t=(0,i.Z)(e,m);return(0,r.mdx)(g,(0,a.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"component-registration-annotation"},"Component registration annotation"),(0,r.mdx)("p",null,"When your test design requires to register fixture components and unregister them after the test execution, use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir")," annotation.\nIt enables you to register all the components at a specified directory recursively."),(0,r.mdx)("h2",{id:"format"},"Format"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"/**\n* @magentoComponentsDir <dir_path>\n*/\n")),(0,r.mdx)("p",null,"Here, ",(0,r.mdx)("inlineCode",{parentName:"p"},"<dir_path>")," is a path to the directory with fixture components.\nEach component must be registered using ",(0,r.mdx)("inlineCode",{parentName:"p"},"registration.php")," file."),(0,r.mdx)("h2",{id:"test-case"},"Test case"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir")," annotation for a test case is applied to all test methods in the test case."),(0,r.mdx)("h2",{id:"test-method"},"Test method"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir")," annotation for a test method configures the test to run with registered components located in a specified directory.\nIf the parent test case also declares a ",(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir"),", both annotation are merged."),(0,r.mdx)("h2",{id:"example"},"Example"),(0,r.mdx)("p",null,"The following example demonstrates ",(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir")," annotation in different scopes."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"namespace Magento\\Foo;\n\n/**\n * @magentoComponentsDir Magento/Foo/_files/code/Magento\n */\nclass BarTest extends \\PHPUnit\\Framework\\TestCase\n{\n    /**\n     * @magentoComponentsDir Magento/Foo/_files/themes\n     */\n    public function testOne()\n    {\n       ...   // Here you can use registered components from 'Magento/Foo/_files/code/Magento' and 'Magento/Foo/_files/themes'\n    }\n\n    /**\n     * @magentoComponentsDir Magento/Foo/_files/libs\n     * @magentoComponentsDir Magento/Baz/_files/languages\n     */\n    public function testTwo()\n    {\n       ...   // Here you can use the registered components from 'Magento/Foo/_files/code/Magento', 'Magento/Foo/_files/libs', and 'Magento/Baz/_files/languages'\n    }\n}\n")),(0,r.mdx)("p",null,"Each path declared in annotation must contain a registration file in the specified directory or its subdirectories.\nFor example, the ",(0,r.mdx)("inlineCode",{parentName:"p"},"MagentoFooTest_MyModule")," component at ",(0,r.mdx)("inlineCode",{parentName:"p"},"@magentoComponentsDir Magento/Foo/_files/code/Magento")," can be registered in ",(0,r.mdx)("inlineCode",{parentName:"p"},"Magento/Foo/_files/code/Magento/MyModule/registration.php"),":"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"\nuse Magento\\Framework\\Component\\ComponentRegistrar;\n\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n    \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n    'MagentoFooTest_MyModule',\n    __DIR__\n);\n")),(0,r.mdx)(d,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"A theme must be registered in the database. Each time you register a theme, reset the entire application. Use the ",(0,r.mdx)("a",{parentName:"p",href:"../annotations/magento-db-isolation.md"},(0,r.mdx)("inlineCode",{parentName:"a"},"@magentoDbIsolation"))," annotation to keep the database integrity safe."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-integration-annotations-magento-components-dir-md-c433d2987661c74962b5.js.map