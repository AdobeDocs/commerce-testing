{"version":3,"file":"component---src-pages-functional-testing-framework-cicd-md-a870d517be156574bd24.js","mappings":"2RAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAHgC,WACjCC,GAEC,EADEC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,oCACH,qCACL,kBAAK,mHACL,eACE,GAAM,WACH,YACL,kBAAK,sDACL,oBACE,eAAIC,WAAW,MAAO,uFACtB,eAAIA,WAAW,MAAO,uBACpB,eAAIA,WAAW,OACb,eAAIA,WAAW,MAAO,kDAG1B,eAAIA,WAAW,MAAO,yDACpB,eAAIA,WAAW,OACb,eAAIA,WAAW,MAAO,sBAG1B,eAAIA,WAAW,MAAO,mDAExB,eACE,GAAM,8BACH,+BACL,kBAAK,8HACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,qDAEP,kBAAK,OACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,mHAEP,kBAAK,oDAAkD,cAAGA,WAAW,IACjE,KAAQ,qEACL,mCAAuC,MAC9C,kBAAK,0GACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,oPAKP,kBAAK,2OACL,kBAAK,gEAA8D,cAAGA,WAAW,IAC7E,KAAQ,gCACL,iBAAqB,yBAC5B,eACE,GAAM,kBACH,mBACL,kBAAK,yEAAuE,cAAGA,WAAW,IACtF,KAAQ,kCACL,UAAc,kBACrB,eACE,GAAM,kBACH,mBACL,eACE,GAAM,oBACH,qBACL,kBAAK,kDACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,sCAEP,kBAAK,kEAAgE,uBAAYA,WAAW,KAAM,6EAA0F,MAC5L,eACE,GAAM,sBACH,uBACL,kBAAK,qDACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,wDAEP,kBAAK,kCAAgC,uBAAYA,WAAW,KAAM,mEAAgF,mCAAiC,uBAAYA,WAAW,KAAM,cAA2B,2CAAyC,uBAAYA,WAAW,KAAM,qBAAkC,cACnV,eACE,GAAM,0BACH,2BACL,eACE,GAAM,sBACH,qBACL,kBAAK,+CACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,8GAEP,eACE,GAAM,wBACH,uBACL,kBAAK,uFACL,kBAAK,kEAAgE,uBAAYA,WAAW,KAAM,qBAAkC,MACpI,kBAAK,uKACL,kBAAK,2GACL,oBACE,eAAIA,WAAW,MAAO,iEACtB,eAAIA,WAAW,MAAO,QAAM,uBAAYA,WAAW,MAAO,oDAAiE,sBAC3H,eAAIA,WAAW,MAAO,0BAAwB,uBAAYA,WAAW,MAAO,sCAAmD,sCAEjI,eACE,GAAM,iBACH,kBACL,kBAAK,mFAAiF,uBAAYA,WAAW,KAAM,cAA2B,yCAC9I,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,kCAEP,eACE,GAAM,0BACH,2BACL,kBAAK,kDAAgD,uBAAYA,WAAW,KAAM,qBAAkC,iCACpH,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,+DAOV,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-testing/./src/pages/functional-testing-framework/cicd.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-testing/commerce-testing/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"how-to-use-the-framework-in-cicd\"\n    }}>{`How to use the framework in CICD`}</h1>\n    <p>{`To integrate tests into your CICD pipeline, it is best to start with the conceptual flow of the pipeline code.`}</p>\n    <h2 {...{\n      \"id\": \"concept\"\n    }}>{`Concept`}</h2>\n    <p>{`The overall workflow that tests should follow is:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Obtain an Adobe Commerce or Magento Open Source instance + install pre-requisites.`}</li>\n      <li parentName=\"ul\">{`Generate the tests.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Set options for single or parallel running.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Delegate and run tests and gather test-run artifacts.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Re-run options.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Generate the Allure reports from the results.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"obtain-a-commerce-instance\"\n    }}>{`Obtain a Commerce instance`}</h2>\n    <p>{`To start, we need an Adobe Commerce or Magento Open Source instance to operate against for test generation and execution.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`git clone https://github.com/magento/magento2\n`}</code></pre>\n    <p>{`or`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`composer create-project --repository=https://repo.magento.com/ magento/project-community-edition magento2ce\n`}</code></pre>\n    <p>{`For more information on installing Commerce see `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/install-gde/composer.html\"\n      }}>{`Install Commerce using Composer`}</a>{`.`}</p>\n    <p>{`After installing the Adobe Commerce or Magento Open Source instance, set the following configuration:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set general/locale/timezone America/Los_Angeles\nbin/magento config:set admin/security/admin_account_sharing 1\nbin/magento config:set admin/security/use_form_key 0\nbin/magento config:set cms/wysiwyg/enabled disabled\n`}</code></pre>\n    <p>{`These set the default state of the Adobe Commerce or Magento Open Source instance. If you wish to change the default state of the application (and have updated your tests sufficiently to account for it), this is the step to do it.`}</p>\n    <p>{`If your instance has two-factor authentication enabled, see `}<a parentName=\"p\" {...{\n        \"href\": \"two-factor-authentication.md\"\n      }}>{`Configure 2FA`}</a>{` to configure tests.`}</p>\n    <h2 {...{\n      \"id\": \"install-allure\"\n    }}>{`Install Allure`}</h2>\n    <p>{`This is required for generating the report after your test runs. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.qameta.io/allure/\"\n      }}>{`Allure`}</a>{` for details.`}</p>\n    <h2 {...{\n      \"id\": \"generate-tests\"\n    }}>{`Generate tests`}</h2>\n    <h3 {...{\n      \"id\": \"single-execution\"\n    }}>{`Single execution`}</h3>\n    <p>{`Generate tests based on what you want to run:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`vendor/bin/mftf generate:tests\n`}</code></pre>\n    <p>{`This will generate all tests and a single manifest file under `}<inlineCode parentName=\"p\">{`dev/tests/acceptance/tests/functional/Magento/_generated/testManifest.txt`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"parallel-execution\"\n    }}>{`Parallel execution`}</h3>\n    <p>{`To generate all tests for use in parallel nodes:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`vendor/bin/mftf generate:tests --config parallel\n`}</code></pre>\n    <p>{`This generates a folder under `}<inlineCode parentName=\"p\">{`dev/tests/acceptance/tests/functional/Magento/_generated/groups`}</inlineCode>{`. This folder contains several `}<inlineCode parentName=\"p\">{`group#.txt`}</inlineCode>{` files that can be used later with the `}<inlineCode parentName=\"p\">{`mftf run:manifest`}</inlineCode>{` command.`}</p>\n    <h2 {...{\n      \"id\": \"delegate-and-run-tests\"\n    }}>{`Delegate and run tests`}</h2>\n    <h3 {...{\n      \"id\": \"single-execution-1\"\n    }}>{`Single execution`}</h3>\n    <p>{`If you are running on a single node, call:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`vendor/bin/mftf run:manifest dev/tests/acceptance/tests/functional/Magento/_generated/testManifest.txt\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"parallel-execution-1\"\n    }}>{`Parallel execution`}</h3>\n    <p>{`You can optimize your pipeline by running tests in parallel across multiple nodes.`}</p>\n    <p>{`Tests can be split up into roughly equal running groups using `}<inlineCode parentName=\"p\">{`--config parallel`}</inlineCode>{`.`}</p>\n    <p>{`You do not want to perform installations on each node again and build it. So, to save time, stash pre-made artifacts from earlier steps and un-stash on the nodes.`}</p>\n    <p>{`The groups can be then distributed on each of the nodes and run separately in an isolated environment.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Stash artifacts from main node and un-stash on current node.`}</li>\n      <li parentName=\"ul\">{`Run `}<inlineCode parentName=\"li\">{`vendor/bin/mftf run:manifest <current_group.txt>`}</inlineCode>{` on current node.`}</li>\n      <li parentName=\"ul\">{`Gather artifacts from `}<inlineCode parentName=\"li\">{`dev/tests/acceptance/tests/_output`}</inlineCode>{` from current node to main node.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"rerun-options\"\n    }}>{`Rerun options`}</h3>\n    <p>{`In either single or parallel execution, to re-run failed tests, simply add the `}<inlineCode parentName=\"p\">{`run:failed`}</inlineCode>{` command after executing a manifest:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`vendor/bin/mftf run:failed\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"generate-allure-report\"\n    }}>{`Generate Allure report`}</h3>\n    <p>{`In the main node, generate reports using your `}<inlineCode parentName=\"p\">{`<path_to_results>`}</inlineCode>{` into a desired output path:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`allure generate <path_to_results> -c -o <path_to_output>\n`}</code></pre>\n    {\n      /* Link definitions */\n    }\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}