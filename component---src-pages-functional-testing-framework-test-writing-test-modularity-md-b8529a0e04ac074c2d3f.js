"use strict";(self.webpackChunkcommerce_testing=self.webpackChunkcommerce_testing||[]).push([[3106],{9978:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return s},default:function(){return u}});var i=n(58168),a=n(80045),o=(n(88763),n(15680)),l=n(83407);const r=["components"],s={},m={_frontmatter:s},d=l.A;function u(e){let{components:t}=e,n=(0,a.A)(e,r);return(0,o.mdx)(d,(0,i.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"test-modularity"},"Test Modularity"),(0,o.mdx)("p",null,"One of the framework's most distinguishing functionalities is its modularity."),(0,o.mdx)("h2",{id:"what-is-test-modularity"},"What is test modularity"),(0,o.mdx)("p",null,"Within the framework, test modularity can refer to two different concepts:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Merging"),(0,o.mdx)("li",{parentName:"ul"},"Materials")),(0,o.mdx)("h3",{id:"test-material-merging"},"Test material merging"),(0,o.mdx)("p",null,"Test material merging is covered extensively in the ",(0,o.mdx)("a",{parentName:"p",href:"../merging.md"},"merging")," topic, so it will not be our focus in this guide."),(0,o.mdx)("h3",{id:"modular-test-materials"},"Modular test materials"),(0,o.mdx)("p",null,"This refers to test materials being correctly owned by the right Adobe Commerce or Magento Open Source module, and for tests to have references to only what their parent module has a dependency on."),(0,o.mdx)("p",null,"Since the framework queries the Adobe Commerce or Magento Open Source instance for enabled modules, test materials are included or excluded from the merging process dynamically, making proper ownership and dependencies a must."),(0,o.mdx)("p",null,"Consider the following scenario:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"TestA in ModuleA is using materials form ModuleB"),(0,o.mdx)("li",{parentName:"ul"},"In Magento, I now disable ModuleB"),(0,o.mdx)("li",{parentName:"ul"},"TestA will try to use ModuleB materials, which are no longer being read by the framework since the Adobe Commerce or Magento Open Source instance has it disable")),(0,o.mdx)("p",null,"Since TestA's dependencies are out of sync with ModuleA, the tests are no longer properly modular."),(0,o.mdx)("h2",{id:"why-is-test-modularity-important"},"Why is test modularity important?"),(0,o.mdx)("p",null,"This concept is important simply because without proper modularity, tests or test materials may be incorrectly merged in (or left out), leading to the the test itself being out of sync with the Adobe Commerce or Magento Open Source instance."),(0,o.mdx)("p",null,"For example, in a situation where an extension drastically alters the login process (for instance: two factor authentication), the only way the tests will be able to pass is if the test materials are correctly nested in the extension."),(0,o.mdx)("h2",{id:"how-can-i-achieve-test-modularity"},"How can I achieve test modularity?"),(0,o.mdx)("p",null,"Test modularity can be challenging, depending on the breadth of the changes being introduced in a module."),(0,o.mdx)("h3",{id:"determine-test-material-ownership"},"Determine test material ownership"),(0,o.mdx)("p",null,"This is should be the first step when creating new test materials. We will use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"New Product")," page as an example."),(0,o.mdx)("h4",{id:"intuitive-reasoning"},"Intuitive reasoning"),(0,o.mdx)("p",null,"The easiest way to do this has limited application, but some times it is fairly obvious where test material comes from due to nomenclature or functionality."),(0,o.mdx)("p",null,"The following ",(0,o.mdx)("inlineCode",{parentName:"p"},"<select>")," for ",(0,o.mdx)("inlineCode",{parentName:"p"},"Tax Class")," clearly belongs to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Tax")," module:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-xml"},'<select class="admin__control-select" name="product[tax_class_id]"/>\n')),(0,o.mdx)("p",null,"This approach will work on getting the quickest ownership, but it is fairly obvious that it may be necessary to double check."),(0,o.mdx)("h4",{id:"deduction"},"Deduction"),(0,o.mdx)("p",null,"This is the next step up in difficulty from the above method, as it involves searching through the Adobe Commerce or Magento Open Source codebase."),(0,o.mdx)("p",null,"Take the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Add Attribute")," button for example. The button has an ",(0,o.mdx)("inlineCode",{parentName:"p"},'id="addAttribute"')," and since we know Adobe Commerce and Magento Open Source uses XML to declare much of its layout/CSS properties we can start by searching only ",(0,o.mdx)("inlineCode",{parentName:"p"},"*.xml")," files."),(0,o.mdx)("p",null,"Searching through the codebase for ",(0,o.mdx)("inlineCode",{parentName:"p"},'"addAttribute"')," in ",(0,o.mdx)("inlineCode",{parentName:"p"},"xml")," files leads to four different files:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-terminal"},"app/code/Magento/Customer/Test/Mftf/Section/AdminCustomerActivitiesConfigureSection.xml\napp/code/Magento/GiftRegistry/Test/Mftf/Section/AdminGiftRegistrySection.xml\napp/code/Magento/Catalog/Test/Mftf/ActionGroup/AdminProductAttributeActionGroup.xml\napp/code/Magento/Catalog/view/adminhtml/ui_component/product_form.xml\n")),(0,o.mdx)("p",null,"The first three are clearly test materials, which leaves us with the final file, and the line below"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-xml"},'<button name="addAttribute" class="Magento\\Catalog\\Block\\Adminhtml\\Product\\Edit\\Button\\AddAttribute"/>\n')),(0,o.mdx)("p",null,"This means we can safely assume ",(0,o.mdx)("inlineCode",{parentName:"p"},"Add Attribute")," button belongs to ",(0,o.mdx)("inlineCode",{parentName:"p"},"Catalog")," based on the above class namespace and filepath."),(0,o.mdx)("p",null,"This kind of deduction is more involved, but it much more likely to give you the true source of the element."),(0,o.mdx)("h3",{id:"use-binmftf-static-checks"},"Use bin/mftf static-checks"),(0,o.mdx)("p",null,"For tests to be fully modular, it must have the same dependencies as its parent module. This is quite difficult to do by hand, and requires checking of every ",(0,o.mdx)("inlineCode",{parentName:"p"},"{{test.material}}")," call and any other references to test materials in a test."),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"static-checks")," command includes a test material ownership check that should help suss out these kind of dependency issues."),(0,o.mdx)("p",null,"See ",(0,o.mdx)("a",{parentName:"p",href:"../commands/mftf.md"},"mftf commands")," for more information."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-functional-testing-framework-test-writing-test-modularity-md-b8529a0e04ac074c2d3f.js.map