"use strict";(self.webpackChunkcommerce_testing=self.webpackChunkcommerce_testing||[]).push([[7625],{33913:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return s}});var i=t(58168),o=t(80045),a=(t(88763),t(15680)),l=t(83407);const m=["components"],p={},r={_frontmatter:p},d=l.A;function s(e){let{components:n}=e,t=(0,o.A)(e,m);return(0,a.mdx)(d,(0,i.A)({},r,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"command-line"},"Command line"),(0,a.mdx)("h2",{id:"run-all-unit-tests"},"Run all unit tests"),(0,a.mdx)("p",null,"To run all tests, navigate to the application root directory and execute the following command:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"./vendor/bin/phpunit -c dev/tests/unit/phpunit.xml.dist\n")),(0,a.mdx)("h2",{id:"run-only-a-subset-of-the-unit-tests"},"Run only a subset of the unit tests"),(0,a.mdx)("p",null,"To run only tests within a specific directory branch, all you have to do is to specify the directory branch after the command."),(0,a.mdx)("p",null,"The following example tells PHPUnit to look for any file ending with ",(0,a.mdx)("inlineCode",{parentName:"p"},"Test.php")," within the directory branch ",(0,a.mdx)("inlineCode",{parentName:"p"},"app/code/Example/Module/Test/Unit")," and try to execute it."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"./vendor/bin/phpunit -c dev/tests/unit/phpunit.xml.dist app/code/Example/Module/Test/Unit\n")),(0,a.mdx)("h2",{id:"explanation"},"Explanation"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"phpunit")," executable is installed by ",(0,a.mdx)("inlineCode",{parentName:"p"},"composer")," and linked into the directory ",(0,a.mdx)("inlineCode",{parentName:"p"},"vendor/bin"),"."),(0,a.mdx)("p",null,"The option ",(0,a.mdx)("inlineCode",{parentName:"p"},"-c dev/tests/unit/phpunit.xml.dist")," specifies the configuration file for PHPUnit."),(0,a.mdx)("p",null,"If custom configuration settings are required (more on that later), the file ",(0,a.mdx)("inlineCode",{parentName:"p"},"dev/tests/unit/phpunit.xml.dist")," can be copied to ",(0,a.mdx)("inlineCode",{parentName:"p"},"dev/tests/unit/phpunit.xml")," and adjusted as needed. In that case modify the ",(0,a.mdx)("inlineCode",{parentName:"p"},"-c")," flag accordingly."),(0,a.mdx)("p",null,"PHPUnit has many additional command line options. Please refer to the ",(0,a.mdx)("a",{parentName:"p",href:"https://phpunit.de/manual/4.1/en/textui.html#textui.clioptions"},"PHPUnit documentation")," for more information (currently Commerce uses PHPUnit version 4.1.0, 2.2.x uses PHPUnit version 6.x)."),(0,a.mdx)("h2",{id:"solutions-to-common-problems"},"Solutions to common problems"),(0,a.mdx)("h3",{id:"permission-denied"},"Permission Denied"),(0,a.mdx)("p",null,"One possible reason for this to happen might be if you are trying to execute PHPUnit inside a Virtual Box VM with shared folders that don't allow modifying permissions."),(0,a.mdx)("p",null,"Whatever the reason, if you encounter the ",(0,a.mdx)("inlineCode",{parentName:"p"},"permission denied: vendor/bin/phpunit")," error, you can prefix the command with the PHP interpreter, so your system knows what binary to use to run the tests."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"php -f vendor/bin/phpunit -- -c dev/tests/unit/phpunit.xml.dist\n")),(0,a.mdx)("h3",{id:"use-the-correct-php-interpreter"},"Use the correct PHP interpreter"),(0,a.mdx)("p",null,"On many development systems, you might have more one PHP version installed. You must know the correct PHP interpreter to use for testing; that is, use the same version of PHP to run the unit tests you use to run Magento."),(0,a.mdx)("p",null,"Some examples follow:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"Ubuntu: ",(0,a.mdx)("inlineCode",{parentName:"p"},"/usr/bin/php"))),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"CentOS: ",(0,a.mdx)("inlineCode",{parentName:"p"},"/usr/bin/php"))),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"MacOS:"),(0,a.mdx)("ul",{parentName:"li"},(0,a.mdx)("li",{parentName:"ul"},"System: ",(0,a.mdx)("inlineCode",{parentName:"li"},"/usr/bin/php")),(0,a.mdx)("li",{parentName:"ul"},"Homebrew: ",(0,a.mdx)("inlineCode",{parentName:"li"},"/usr/local/Cellar/php56/5.6.19/bin/php")),(0,a.mdx)("li",{parentName:"ul"},"MAMP: ",(0,a.mdx)("inlineCode",{parentName:"li"},"/Applications/MAMP/bin/php/php5.6.19/bin/php"))))),(0,a.mdx)("p",null,"You can either fix your ",(0,a.mdx)("inlineCode",{parentName:"p"},"$PATH")," (please refer to your system documentation on how to do that), or specify the full path to the PHP interpreter. For example:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"/usr/local/Cellar/php56/5.6.19/bin/php -f vendor/bin/phpunit -- -c dev/tests/unit/phpunit.xml.dist\n")),(0,a.mdx)("h3",{id:"memory-limit"},"Memory Limit"),(0,a.mdx)("p",null,"If you encounter an error similar to ",(0,a.mdx)("inlineCode",{parentName:"p"},"Fatal error: Allowed memory size of 67108864 bytes exhausted"),", follow these steps to resolve it."),(0,a.mdx)("p",null,"Copy the PHPUnit configuration file ",(0,a.mdx)("inlineCode",{parentName:"p"},"dev/tests/unit/phpunit.xml.dist")," to ",(0,a.mdx)("inlineCode",{parentName:"p"},"dev/tests/unit/phpunit.xml")),(0,a.mdx)("p",null,"Find the following section:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-xml"},'<php>\n    <ini name="date.timezone" value="America/Los_Angeles"/>\n    <ini name="xdebug.max_nesting_level" value="200"/>\n</php>\n')),(0,a.mdx)("p",null,"Add the following line in the ",(0,a.mdx)("inlineCode",{parentName:"p"},"<php>")," block to disable the PHP memory limit during test execution."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-xml"},'<ini name="memory_limit" value="-1"/>\n')))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-unit-command-line-md-f18171559315862e3f98.js.map